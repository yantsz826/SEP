@{
    ViewBag.Title = "UserEdit";
}

<h2 style="text-align: center;">User table</h2>
<form action="~/Home/UserEdit\" method="post">
    <table id="addUser">
        <tr>
            <td>Supplier Account: <input type="text" name="addUserID"></td>
            <td>Email: <input type="text" name="addEmail"></td>
            <td><input type="submit" name="AddUser" value="Add user"></td>
        <tr>
    </table>
</form>
<form action="~/Home/UserEdit\" method="post">
    <div style="width:90%; margin:0 auto">
        <table id="myTable"></table>
    </div>
</form>
@* Load datatable css*@
<link href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
@* Load datatabls js*@
@section Scripts
{
    <script src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <script>
        var jsArr = new Array(@ViewBag.count);


        @for(var i = 0; i < @ViewBag.count; i++)
        {    
            <text>jsArr[@i] = new Array(6);</text>

            if (ViewBag.account[i].Equals(ViewBag.displayAc[i]))
                {
                        <text>jsArr[@i][0] = '@ViewBag.displayAc[i]';</text>
                        <text>jsArr[@i][1] = '@ViewBag.displayEmail[i]';</text>
                }
                else
                {
                        <text>jsArr[@i][0] = '@ViewBag.account[i] : @ViewBag.displayAc[i]';</text>
                        <text>jsArr[@i][1] = '@ViewBag.email[i] : @ViewBag.displayEmail[i]';</text>
                }

                if (ViewBag.admin[i] == 0)
                {
                    <text>jsArr[@i][2] = '<input name ="setAdmin" value="admin" type="checkbox"><button name="submitAdmin" type="submit" value="@ViewBag.account[i]">submit</button>';</text>
                }
                else
                {
                    <text>jsArr[@i][2] = '<input name ="setAdmin" value="admin" type="checkbox" checked><button name="submitAdmin" type="submit" value="@ViewBag.account[i]">submit</button>';</text>
                }

                <text>jsArr[@i][3] = '<button name="Reset" type="submit" value="@ViewBag.account[i]">Reset</button>';</text>
                <text>jsArr[@i][4] = '<button name="Edit" type="submit" value="jsArr[i][0]">Edit</button><button name="submitBut" type="submit" value="@ViewBag.account[i]">submit</button><button name="cancel" type="submit" value="True">cancel</button>';</text>
                <text>jsArr[@i][5] = '<button name="Delete" type="submit" onclick="if (confirm(\'Do u want to delete \' + \' @ViewBag.account[i] \')) form.action=\'/home/UserEdit\' \; else return false \; " value="@ViewBag.account[i]">delete</button>';</text>
            }

        $(document).ready(function () {
            $('#myTable').DataTable({
                responsive: {
                    details: false
                },
                data: jsArr,
                columns: [
                    { title: "Supplier Account" },
                    { title: "Email" },
                    { title: "Admin" },
                    { title: "Reset Password" },
                    { title: "Edit user" },
                    { title: "Delete user" }
                ]
            });
        });

</script>
}